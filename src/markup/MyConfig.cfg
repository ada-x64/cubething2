\Preamble{xhtml}

\xeuniuseblock{Emoticons}
\xeuniuseblock{Supplemental Symbols and Pictographs}

% Remove stuff for full-page renders
\Configure{HTML}{\HCode{<html>\Hnewline}}{\HCode{</html>\Hnewline}}
\Configure{HEAD}{}{}
\Configure{@HEAD}{}
\Configure{@HEAD}{\
   \HCode{<head>\Hnewline}
   \HCode{<script src="js/app.js" type="module"></script>\Hnewline}\
   \HCode{<link rel="stylesheet" type="text/css" href="/styles/index.css" />\Hnewline}
   \HCode{</head>\Hnewline}
}
\Configure{BODY}{\HCode{<the-app><article>}}{\HCode{</article></the-app>}}

% Removing the BODY removes footnotes.
% https://tex.stackexchange.com/questions/712940/make4ht-place-footnotes-container-inside-main-content-container
\catcode`\:=11 % we need to support the ":" character in command names
\Configure{@/BODY}{\ifvmode\IgnorePar\fi\EndP
\ifvoid \fn:box\else
   \HCode{<div class="footnotes">}\box\fn:box\HCode{</div>}
   \IgnorePar\EndP
\fi
}%

\catcode`\:=12

%% CUSTOM COMMANDS
% Video embeds
\newcommand\video[3]{%
\HCode{%
<video controls='true' width="#1" height="#2" src="#3"></video>
}
}
%% / CUSTOM COMMANDS

% Don't tokenize \eqref, so we can use it with katex
\begin{document}
\renewcommand\eqref[1]{\NoFonts\HChar{92}eqref\{\detokenize{#1}\}\EndNoFonts}

\EndPreamble